import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.BVOCwoKb.js";const b=[{author:"小老杜",text:"产生的v测试",date:"2025-04-29T07:11:24.668Z"},{author:"从v从",text:"发生的v",date:"2025-04-29T07:13:02.713Z"},{author:"Sat Naing",text:"啊啊啊",date:"2025-04-29T07:14:28.577Z"},{author:"jojoba",text:"发的是多少",articleTitle:"Csgo",date:"2025-04-29T07:44:45.158Z"},{author:"小老杜",text:"地方v感到十分v",articleTitle:"Lssssss",date:"2025-04-29T07:50:08.415Z"},{author:"152",text:"费用和房产过户",articleTitle:"Lssssss",date:"2025-04-29T08:44:22.351Z"},{author:"jojoba",text:"v检查v计划v集合",articleTitle:"Lssssss",date:"2025-04-29T08:44:38.929Z"},{author:"Sat Naing",text:"吱吱吱吱",articleTitle:"Lssssss",date:"2025-04-29T08:46:47.575Z"},{author:"小老杜",text:"gggg",articleTitle:"SSSSc",date:"2025-04-29T09:06:52.604Z"},{author:"2626",text:"22222",articleTitle:"SSSSc",date:"2025-04-29T09:07:32.389Z"}],g={comments:b};function j({articleTitle:i}){const u=g.comments.filter(e=>e.articleTitle===i),[d]=o.useState(u||[]),[s,l]=o.useState({author:"",text:"",articleTitle:i}),[n,c]=o.useState(!1),[m,a]=o.useState(""),h=async e=>{if(e.preventDefault(),!s.author.trim()||!s.text.trim()){a("请填写昵称和评论内容");return}c(!0);try{const x=await(await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();x.success?(a("评论已提交，审核后将显示"),l({...s,author:"",text:""})):a(`提交失败: ${x.message}`)}catch(r){console.error("提交评论时出错:",r),a("提交评论时发生错误，请稍后再试")}finally{c(!1)}};return t.jsxs("section",{className:"comment-section my-8",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"评论"}),d.length>0?t.jsx("div",{className:"space-y-4 mb-6",children:d.map((e,r)=>t.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("span",{className:"font-semibold",children:e.author}),t.jsx("span",{className:"mx-2",children:"•"}),t.jsx("time",{children:new Date(e.date).toLocaleDateString()})]}),t.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:e.text})]},r))}):t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"还没有评论。成为第一个评论的人吧！"}),t.jsxs("form",{onSubmit:h,className:"space-y-4 mt-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"author",className:"block text-sm font-medium mb-1",children:"昵称"}),t.jsx("input",{type:"text",id:"author",value:s.author,onChange:e=>l({...s,author:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md dark:bg-gray-800",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"text",className:"block text-sm font-medium mb-1",children:"评论"}),t.jsx("textarea",{id:"text",value:s.text,onChange:e=>l({...s,text:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md h-32 dark:bg-gray-800",required:!0})]}),m&&t.jsx("div",{className:"text-sm py-2 px-3 rounded-md bg-blue-50 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:m}),t.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:n?"提交中...":"发表评论"})]})]})}export{j as default};
