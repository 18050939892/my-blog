import{j as o}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.BVOCwoKb.js";function w(c){const i=n.useRef(null),{initialValue:s}=c,[d,m]=n.useState(""),[a,l]=n.useState(!0);return n.useEffect(()=>{async function t(){try{l(!0);const e=await fetch("https://myblogvalue-production.up.railway.app/blog",{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}});if(!e.ok)throw new Error("Failed to fetch blog data");const r=(await e.json()).comments.filter(p=>p.title===s)[0];r&&r.content&&m(r.content)}catch(e){console.error("Error fetching blog data:",e)}finally{l(!1)}}s&&t()},[s]),n.useEffect(()=>{const t=document.createElement("link");t.rel="stylesheet",t.href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css",document.head.appendChild(t);const e=document.createElement("script");return e.src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js",e.onload=()=>{i.current&&typeof window.SimpleMDE<"u"&&(window.simplemde=new window.SimpleMDE({element:i.current,spellChecker:!1,autofocus:!0,placeholder:"在这里输入 Markdown 内容..."}),d&&window.simplemde&&window.simplemde.value(d),document.dispatchEvent(new Event("editorReady")))},document.body.appendChild(e),()=>{window.simplemde&&(window.simplemde.toTextArea(),window.simplemde=null),document.head.removeChild(t),document.body.removeChild(e)}},[d]),o.jsxs(o.Fragment,{children:[a&&o.jsx("div",{children:"加载编辑器中..."}),o.jsx("textarea",{ref:i,id:"editor-area",defaultValue:"",style:{display:a?"none":"block"}})]})}export{w as CommentMarkdownEditor};
